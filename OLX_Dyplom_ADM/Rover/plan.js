const plan = {"format_version":"1.2","terraform_version":"1.9.8","variables":{"aks_admin_username":{"value":"ubuntu"},"aks_vm_size":{"value":"Standard_B2s"},"azure_subscription_id":{"value":"3eba8433-8aaf-40ef-9be5-87b8edefec97"},"backup_storage_prefix":{"value":"gosellbackup"},"build_agent_vm_size":{"value":"Standard_B2s"},"doppler_token":{"value":"dp.st.dev.0eIlmMU4hl6jFx4DlpFbsgoz5W3yJH4VlKeUJlif7ql"},"instance_count":{"value":2},"main_instance_vm_size":{"value":"Standard_B2ms"},"main_vm_name":{"value":"main-vm"},"node_count":{"value":2},"rg_prefix":{"value":"gosell"},"vm_admin_username":{"value":"ubuntu"},"vm_private_ip":{"value":"10.0.1.5"},"vm_sku":{"value":"22_04-lts"}},"planned_values":{"outputs":{"ansible_inventory_path":{"sensitive":false,"value":"../An/hosts"},"jenkins_agent_ips":{"sensitive":false},"jenkins_master_ip":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.agent_rule_block_ssh.azurerm_network_security_rule.rule","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"DenySSHFromAll","network_security_group_name":"agent-nsg","priority":150,"protocol":"Tcp","resource_group_name":"gosell-build-agents","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}}],"address":"module.agent_rule_block_ssh"},{"resources":[{"address":"module.aks_cluster.azurerm_kubernetes_cluster.k8s","mode":"managed","type":"azurerm_kubernetes_cluster","name":"k8s","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"aci_connector_linux":[],"automatic_channel_upgrade":null,"azure_active_directory_role_based_access_control":[],"azure_policy_enabled":null,"confidential_computing":[],"cost_analysis_enabled":null,"custom_ca_trust_certificates_base64":null,"default_node_pool":[{"capacity_reservation_group_id":null,"custom_ca_trust_enabled":null,"enable_auto_scaling":null,"enable_host_encryption":null,"enable_node_public_ip":null,"fips_enabled":null,"gpu_instance":null,"host_group_id":null,"kubelet_config":[],"linux_os_config":[],"max_count":null,"message_of_the_day":null,"min_count":null,"name":"agentpool","node_count":2,"node_network_profile":[],"node_public_ip_prefix_id":null,"node_taints":null,"only_critical_addons_enabled":null,"os_disk_type":"Managed","pod_subnet_id":null,"proximity_placement_group_id":null,"scale_down_mode":"Delete","snapshot_id":null,"tags":null,"temporary_name_for_rotation":null,"type":"VirtualMachineScaleSets","ultra_ssd_enabled":false,"upgrade_settings":[],"vm_size":"Standard_B2s","vnet_subnet_id":null,"zones":null}],"disk_encryption_set_id":null,"dns_prefix_private_cluster":null,"edge_zone":null,"enable_pod_security_policy":null,"http_application_routing_enabled":null,"http_proxy_config":[],"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"image_cleaner_enabled":false,"image_cleaner_interval_hours":48,"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"linux_profile":[{"admin_username":"ubuntu","ssh_key":[{"key_data":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure"}]}],"local_account_disabled":null,"location":"northeurope","maintenance_window":[],"maintenance_window_auto_upgrade":[],"maintenance_window_node_os":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"load_balancer_sku":"standard","network_plugin":"kubenet","network_plugin_mode":null,"outbound_type":"loadBalancer"}],"node_os_channel_upgrade":null,"oidc_issuer_enabled":null,"oms_agent":[],"open_service_mesh_enabled":null,"private_cluster_enabled":false,"private_cluster_public_fqdn_enabled":false,"public_network_access_enabled":true,"resource_group_name":"gosell-aks-cluster","role_based_access_control_enabled":true,"run_command_enabled":true,"service_mesh_profile":[],"service_principal":[],"sku_tier":"Free","storage_profile":[],"support_plan":"KubernetesOfficial","tags":null,"timeouts":null,"web_app_routing":[],"workload_autoscaler_profile":[],"workload_identity_enabled":false},"sensitive_values":{"aci_connector_linux":[],"api_server_access_profile":[],"api_server_authorized_ip_ranges":[],"auto_scaler_profile":[],"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"default_node_pool":[{"kubelet_config":[],"linux_os_config":[],"node_labels":{},"node_network_profile":[],"upgrade_settings":[]}],"http_proxy_config":[],"identity":[{}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":true,"kube_admin_config_raw":true,"kube_config":true,"kube_config_raw":true,"kubelet_identity":[],"linux_profile":[{"ssh_key":[{"key_data":true}]}],"maintenance_window":[],"maintenance_window_auto_upgrade":[],"maintenance_window_node_os":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"ip_versions":[],"load_balancer_profile":[],"nat_gateway_profile":[],"outbound_ip_address_ids":[],"outbound_ip_prefix_ids":[],"pod_cidrs":[],"service_cidrs":[]}],"oms_agent":[],"service_mesh_profile":[],"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":[],"workload_autoscaler_profile":[]}},{"address":"module.aks_cluster.random_pet.azurerm_kubernetes_cluster_dns_prefix","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_dns_prefix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"keepers":null,"length":2,"prefix":"dns","separator":"-"},"sensitive_values":{}},{"address":"module.aks_cluster.random_pet.azurerm_kubernetes_cluster_name","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_name","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"keepers":null,"length":2,"prefix":"cluster","separator":"-"},"sensitive_values":{}}],"address":"module.aks_cluster"},{"resources":[{"address":"module.aks_cluster_rg.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"northeurope","managed_by":null,"name":"gosell-aks-cluster","tags":{"purpose":"aks_cluster"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.aks_cluster_rg"},{"resources":[{"address":"module.ansible_inventory.local_file.ansible_inventory","mode":"managed","type":"local_file","name":"ansible_inventory","provider_name":"registry.terraform.io/hashicorp/local","schema_version":0,"values":{"content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"../An/hosts","sensitive_content":null,"source":null},"sensitive_values":{"sensitive_content":true}}],"address":"module.ansible_inventory"},{"resources":[{"address":"module.backup_storage.azurerm_storage_account.backup_sa","mode":"managed","type":"azurerm_storage_account","name":"backup_sa","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":4,"values":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"dns_endpoint_type":"Standard","edge_zone":null,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"local_user_enabled":true,"location":"westeurope","min_tls_version":"TLS1_2","nfsv3_enabled":false,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","resource_group_name":"gosell-backup-storage","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"table_encryption_key_type":"Service","tags":{"environment":"production","purpose":"backups"},"timeouts":null},"sensitive_values":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[],"static_website":[],"tags":{}}},{"address":"module.backup_storage.azurerm_storage_container.backup_container","mode":"managed","type":"azurerm_storage_container","name":"backup_container","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"container_access_type":"private","encryption_scope_override_enabled":true,"name":"backups","timeouts":null},"sensitive_values":{"metadata":{}}},{"address":"module.backup_storage.random_pet.as_storage_name","mode":"managed","type":"random_pet","name":"as_storage_name","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"keepers":null,"length":2,"prefix":"gosellbackup","separator":""},"sensitive_values":{}}],"address":"module.backup_storage"},{"resources":[{"address":"module.backup_storage_rg.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"westeurope","managed_by":null,"name":"gosell-backup-storage","tags":{"purpose":"backup_storage"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.backup_storage_rg"},{"resources":[{"address":"module.build_agent_instance.azurerm_linux_virtual_machine.build_agent_vm[0]","mode":"managed","type":"azurerm_linux_virtual_machine","name":"build_agent_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"build-ub-0","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"build-ub-osdisk-0","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-build-agents","secret":[],"secure_boot_enabled":null,"size":"Standard_B2s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.build_agent_instance.azurerm_linux_virtual_machine.build_agent_vm[1]","mode":"managed","type":"azurerm_linux_virtual_machine","name":"build_agent_vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"build-ub-1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"build-ub-osdisk-1","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-build-agents","secret":[],"secure_boot_enabled":null,"size":"Standard_B2s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.build_agent_instance.azurerm_network_interface.build_agent_nic[0]","mode":"managed","type":"azurerm_network_interface","name":"build_agent_nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"eastus","name":"agent-nic-0","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.build_agent_instance.azurerm_network_interface.build_agent_nic[1]","mode":"managed","type":"azurerm_network_interface","name":"build_agent_nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"eastus","name":"agent-nic-1","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.build_agent_instance.azurerm_network_interface_security_group_association.vm_nic_nsg[0]","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.build_agent_instance.azurerm_network_interface_security_group_association.vm_nic_nsg[1]","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.build_agent_instance.azurerm_public_ip.build_agent_pip[0]","mode":"managed","type":"azurerm_public_ip","name":"build_agent_pip","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Dynamic","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"agent-pip-0","public_ip_prefix_id":null,"resource_group_name":"gosell-build-agents","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.build_agent_instance.azurerm_public_ip.build_agent_pip[1]","mode":"managed","type":"azurerm_public_ip","name":"build_agent_pip","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Dynamic","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"agent-pip-1","public_ip_prefix_id":null,"resource_group_name":"gosell-build-agents","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.build_agent_instance.azurerm_subnet.build_agent_subnet","mode":"managed","type":"azurerm_subnet","name":"build_agent_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.1.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"agent-subnet","resource_group_name":"gosell-build-agents","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"agent-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.build_agent_instance.azurerm_virtual_network.build_agent_vnet","mode":"managed","type":"azurerm_virtual_network","name":"build_agent_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.1.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"agent-vnet","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}],"address":"module.build_agent_instance"},{"resources":[{"address":"module.build_agent_rg.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","managed_by":null,"name":"gosell-build-agents","tags":{"purpose":"build_agent_instance"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.build_agent_rg"},{"resources":[{"address":"module.create_builder_nsg.azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"eastus","name":"agent-nsg","resource_group_name":"gosell-build-agents","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}],"address":"module.create_builder_nsg"},{"resources":[{"address":"module.create_main_nsg.azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"westus","name":"main-nsg","resource_group_name":"gosell-main-instance","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"sensitive_values":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}],"address":"module.create_main_nsg"},{"resources":[{"address":"module.main_instance.azurerm_linux_virtual_machine.vm","mode":"managed","type":"azurerm_linux_virtual_machine","name":"vm","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"computer_name":"main-vm","custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"westus","max_bid_price":-1,"name":"main-vm","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"main-vm-osdisk","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-main-instance","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"sensitive_values":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}},{"address":"module.main_instance.azurerm_network_interface.vm_nic","mode":"managed","type":"azurerm_network_interface","name":"vm_nic","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address":"10.0.1.5","private_ip_address_allocation":"Static","private_ip_address_version":"IPv4"}],"location":"westus","name":"main-vm-nic","resource_group_name":"gosell-main-instance","tags":null,"timeouts":null},"sensitive_values":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}},{"address":"module.main_instance.azurerm_network_interface_security_group_association.vm_nic_nsg","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"timeouts":null},"sensitive_values":{}},{"address":"module.main_instance.azurerm_public_ip.vm_public_ip","mode":"managed","type":"azurerm_public_ip","name":"vm_public_ip","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"westus","name":"main-vm-public-ip","public_ip_prefix_id":null,"resource_group_name":"gosell-main-instance","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"sensitive_values":{}},{"address":"module.main_instance.azurerm_subnet.vm_subnet","mode":"managed","type":"azurerm_subnet","name":"vm_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.0.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"main-vm-subnet","resource_group_name":"gosell-main-instance","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"main-vm-vnet"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}},{"address":"module.main_instance.azurerm_virtual_network.vm_vnet","mode":"managed","type":"azurerm_virtual_network","name":"vm_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"westus","name":"main-vm-vnet","resource_group_name":"gosell-main-instance","tags":null,"timeouts":null},"sensitive_values":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}},{"address":"module.main_instance.data.azurerm_public_ip.vm_public_ip_data","mode":"data","type":"azurerm_public_ip","name":"vm_public_ip_data","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"name":"main-vm-public-ip","resource_group_name":"gosell-main-instance","timeouts":null},"sensitive_values":{"ip_tags":{},"tags":{},"zones":[]}},{"address":"module.main_instance.time_sleep.wait_30_seconds","mode":"managed","type":"time_sleep","name":"wait_30_seconds","provider_name":"registry.terraform.io/hashicorp/time","schema_version":0,"values":{"create_duration":"30s","destroy_duration":null,"triggers":null},"sensitive_values":{}},{"address":"module.main_instance.time_sleep.wait_for_ip","mode":"managed","type":"time_sleep","name":"wait_for_ip","provider_name":"registry.terraform.io/hashicorp/time","schema_version":0,"values":{"create_duration":"60s","destroy_duration":null,"triggers":null},"sensitive_values":{}}],"address":"module.main_instance"},{"resources":[{"address":"module.main_instance_rg.azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"location":"westus","managed_by":null,"name":"gosell-main-instance","tags":{"purpose":"main_instance"},"timeouts":null},"sensitive_values":{"tags":{}}}],"address":"module.main_instance_rg"},{"resources":[{"address":"module.main_rule_block_ssh.azurerm_network_security_rule.rule","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"DenySSHFromAll","network_security_group_name":"main-nsg","priority":150,"protocol":"Tcp","resource_group_name":"gosell-main-instance","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"sensitive_values":{}}],"address":"module.main_rule_block_ssh"}]}},"resource_changes":[{"address":"module.agent_rule_block_ssh.azurerm_network_security_rule.rule","module_address":"module.agent_rule_block_ssh","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"DenySSHFromAll","network_security_group_name":"agent-nsg","priority":150,"protocol":"Tcp","resource_group_name":"gosell-build-agents","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.aks_cluster.azurerm_kubernetes_cluster.k8s","module_address":"module.aks_cluster","mode":"managed","type":"azurerm_kubernetes_cluster","name":"k8s","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"aci_connector_linux":[],"automatic_channel_upgrade":null,"azure_active_directory_role_based_access_control":[],"azure_policy_enabled":null,"confidential_computing":[],"cost_analysis_enabled":null,"custom_ca_trust_certificates_base64":null,"default_node_pool":[{"capacity_reservation_group_id":null,"custom_ca_trust_enabled":null,"enable_auto_scaling":null,"enable_host_encryption":null,"enable_node_public_ip":null,"fips_enabled":null,"gpu_instance":null,"host_group_id":null,"kubelet_config":[],"linux_os_config":[],"max_count":null,"message_of_the_day":null,"min_count":null,"name":"agentpool","node_count":2,"node_network_profile":[],"node_public_ip_prefix_id":null,"node_taints":null,"only_critical_addons_enabled":null,"os_disk_type":"Managed","pod_subnet_id":null,"proximity_placement_group_id":null,"scale_down_mode":"Delete","snapshot_id":null,"tags":null,"temporary_name_for_rotation":null,"type":"VirtualMachineScaleSets","ultra_ssd_enabled":false,"upgrade_settings":[],"vm_size":"Standard_B2s","vnet_subnet_id":null,"zones":null}],"disk_encryption_set_id":null,"dns_prefix_private_cluster":null,"edge_zone":null,"enable_pod_security_policy":null,"http_application_routing_enabled":null,"http_proxy_config":[],"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"image_cleaner_enabled":false,"image_cleaner_interval_hours":48,"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"linux_profile":[{"admin_username":"ubuntu","ssh_key":[{"key_data":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure"}]}],"local_account_disabled":null,"location":"northeurope","maintenance_window":[],"maintenance_window_auto_upgrade":[],"maintenance_window_node_os":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"load_balancer_sku":"standard","network_plugin":"kubenet","network_plugin_mode":null,"outbound_type":"loadBalancer"}],"node_os_channel_upgrade":null,"oidc_issuer_enabled":null,"oms_agent":[],"open_service_mesh_enabled":null,"private_cluster_enabled":false,"private_cluster_public_fqdn_enabled":false,"public_network_access_enabled":true,"resource_group_name":"gosell-aks-cluster","role_based_access_control_enabled":true,"run_command_enabled":true,"service_mesh_profile":[],"service_principal":[],"sku_tier":"Free","storage_profile":[],"support_plan":"KubernetesOfficial","tags":null,"timeouts":null,"web_app_routing":[],"workload_autoscaler_profile":[],"workload_identity_enabled":false},"after_unknown":{"aci_connector_linux":[],"api_server_access_profile":true,"api_server_authorized_ip_ranges":true,"auto_scaler_profile":true,"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"current_kubernetes_version":true,"default_node_pool":[{"kubelet_config":[],"kubelet_disk_type":true,"linux_os_config":[],"max_pods":true,"node_labels":true,"node_network_profile":[],"orchestrator_version":true,"os_disk_size_gb":true,"os_sku":true,"upgrade_settings":[],"workload_runtime":true}],"dns_prefix":true,"fqdn":true,"http_application_routing_zone_name":true,"http_proxy_config":[],"id":true,"identity":[{"principal_id":true,"tenant_id":true}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":true,"kube_admin_config_raw":true,"kube_config":true,"kube_config_raw":true,"kubelet_identity":true,"kubernetes_version":true,"linux_profile":[{"ssh_key":[{}]}],"maintenance_window":[],"maintenance_window_auto_upgrade":[],"maintenance_window_node_os":[],"microsoft_defender":[],"monitor_metrics":[],"name":true,"network_profile":[{"dns_service_ip":true,"docker_bridge_cidr":true,"ebpf_data_plane":true,"ip_versions":true,"load_balancer_profile":true,"nat_gateway_profile":true,"network_data_plane":true,"network_mode":true,"network_policy":true,"outbound_ip_address_ids":true,"outbound_ip_prefix_ids":true,"pod_cidr":true,"pod_cidrs":true,"service_cidr":true,"service_cidrs":true}],"node_resource_group":true,"node_resource_group_id":true,"oidc_issuer_url":true,"oms_agent":[],"portal_fqdn":true,"private_dns_zone_id":true,"private_fqdn":true,"service_mesh_profile":[],"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":true,"workload_autoscaler_profile":[]},"before_sensitive":false,"after_sensitive":{"aci_connector_linux":[],"api_server_access_profile":[],"api_server_authorized_ip_ranges":[],"auto_scaler_profile":[],"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"default_node_pool":[{"kubelet_config":[],"linux_os_config":[],"node_labels":{},"node_network_profile":[],"upgrade_settings":[]}],"http_proxy_config":[],"identity":[{}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":true,"kube_admin_config_raw":true,"kube_config":true,"kube_config_raw":true,"kubelet_identity":[],"linux_profile":[{"ssh_key":[{"key_data":true}]}],"maintenance_window":[],"maintenance_window_auto_upgrade":[],"maintenance_window_node_os":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"ip_versions":[],"load_balancer_profile":[],"nat_gateway_profile":[],"outbound_ip_address_ids":[],"outbound_ip_prefix_ids":[],"pod_cidrs":[],"service_cidrs":[]}],"oms_agent":[],"service_mesh_profile":[],"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":[],"workload_autoscaler_profile":[]}}},{"address":"module.aks_cluster.random_pet.azurerm_kubernetes_cluster_dns_prefix","module_address":"module.aks_cluster","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_dns_prefix","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":2,"prefix":"dns","separator":"-"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.aks_cluster.random_pet.azurerm_kubernetes_cluster_name","module_address":"module.aks_cluster","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_name","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":2,"prefix":"cluster","separator":"-"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.aks_cluster_rg.azurerm_resource_group.this","module_address":"module.aks_cluster_rg","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"northeurope","managed_by":null,"name":"gosell-aks-cluster","tags":{"purpose":"aks_cluster"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.ansible_inventory.local_file.ansible_inventory","module_address":"module.ansible_inventory","mode":"managed","type":"local_file","name":"ansible_inventory","provider_name":"registry.terraform.io/hashicorp/local","change":{"actions":["create"],"before":null,"after":{"content_base64":null,"directory_permission":"0777","file_permission":"0777","filename":"../An/hosts","sensitive_content":null,"source":null},"after_unknown":{"content":true,"content_base64sha256":true,"content_base64sha512":true,"content_md5":true,"content_sha1":true,"content_sha256":true,"content_sha512":true,"id":true},"before_sensitive":false,"after_sensitive":{"sensitive_content":true}}},{"address":"module.backup_storage.azurerm_storage_account.backup_sa","module_address":"module.backup_storage","mode":"managed","type":"azurerm_storage_account","name":"backup_sa","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"account_kind":"StorageV2","account_replication_type":"LRS","account_tier":"Standard","allow_nested_items_to_be_public":true,"allowed_copy_scope":null,"azure_files_authentication":[],"cross_tenant_replication_enabled":true,"custom_domain":[],"customer_managed_key":[],"default_to_oauth_authentication":false,"dns_endpoint_type":"Standard","edge_zone":null,"identity":[],"immutability_policy":[],"infrastructure_encryption_enabled":false,"is_hns_enabled":false,"local_user_enabled":true,"location":"westeurope","min_tls_version":"TLS1_2","nfsv3_enabled":false,"public_network_access_enabled":true,"queue_encryption_key_type":"Service","resource_group_name":"gosell-backup-storage","sas_policy":[],"sftp_enabled":false,"shared_access_key_enabled":true,"table_encryption_key_type":"Service","tags":{"environment":"production","purpose":"backups"},"timeouts":null},"after_unknown":{"access_tier":true,"azure_files_authentication":[],"blob_properties":true,"custom_domain":[],"customer_managed_key":[],"enable_https_traffic_only":true,"https_traffic_only_enabled":true,"id":true,"identity":[],"immutability_policy":[],"large_file_share_enabled":true,"name":true,"network_rules":true,"primary_access_key":true,"primary_blob_connection_string":true,"primary_blob_endpoint":true,"primary_blob_host":true,"primary_blob_internet_endpoint":true,"primary_blob_internet_host":true,"primary_blob_microsoft_endpoint":true,"primary_blob_microsoft_host":true,"primary_connection_string":true,"primary_dfs_endpoint":true,"primary_dfs_host":true,"primary_dfs_internet_endpoint":true,"primary_dfs_internet_host":true,"primary_dfs_microsoft_endpoint":true,"primary_dfs_microsoft_host":true,"primary_file_endpoint":true,"primary_file_host":true,"primary_file_internet_endpoint":true,"primary_file_internet_host":true,"primary_file_microsoft_endpoint":true,"primary_file_microsoft_host":true,"primary_location":true,"primary_queue_endpoint":true,"primary_queue_host":true,"primary_queue_microsoft_endpoint":true,"primary_queue_microsoft_host":true,"primary_table_endpoint":true,"primary_table_host":true,"primary_table_microsoft_endpoint":true,"primary_table_microsoft_host":true,"primary_web_endpoint":true,"primary_web_host":true,"primary_web_internet_endpoint":true,"primary_web_internet_host":true,"primary_web_microsoft_endpoint":true,"primary_web_microsoft_host":true,"queue_properties":true,"routing":true,"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_blob_endpoint":true,"secondary_blob_host":true,"secondary_blob_internet_endpoint":true,"secondary_blob_internet_host":true,"secondary_blob_microsoft_endpoint":true,"secondary_blob_microsoft_host":true,"secondary_connection_string":true,"secondary_dfs_endpoint":true,"secondary_dfs_host":true,"secondary_dfs_internet_endpoint":true,"secondary_dfs_internet_host":true,"secondary_dfs_microsoft_endpoint":true,"secondary_dfs_microsoft_host":true,"secondary_file_endpoint":true,"secondary_file_host":true,"secondary_file_internet_endpoint":true,"secondary_file_internet_host":true,"secondary_file_microsoft_endpoint":true,"secondary_file_microsoft_host":true,"secondary_location":true,"secondary_queue_endpoint":true,"secondary_queue_host":true,"secondary_queue_microsoft_endpoint":true,"secondary_queue_microsoft_host":true,"secondary_table_endpoint":true,"secondary_table_host":true,"secondary_table_microsoft_endpoint":true,"secondary_table_microsoft_host":true,"secondary_web_endpoint":true,"secondary_web_host":true,"secondary_web_internet_endpoint":true,"secondary_web_internet_host":true,"secondary_web_microsoft_endpoint":true,"secondary_web_microsoft_host":true,"share_properties":true,"static_website":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"azure_files_authentication":[],"blob_properties":[],"custom_domain":[],"customer_managed_key":[],"identity":[],"immutability_policy":[],"network_rules":[],"primary_access_key":true,"primary_blob_connection_string":true,"primary_connection_string":true,"queue_properties":[],"routing":[],"sas_policy":[],"secondary_access_key":true,"secondary_blob_connection_string":true,"secondary_connection_string":true,"share_properties":[],"static_website":[],"tags":{}}}},{"address":"module.backup_storage.azurerm_storage_container.backup_container","module_address":"module.backup_storage","mode":"managed","type":"azurerm_storage_container","name":"backup_container","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"container_access_type":"private","encryption_scope_override_enabled":true,"name":"backups","timeouts":null},"after_unknown":{"default_encryption_scope":true,"has_immutability_policy":true,"has_legal_hold":true,"id":true,"metadata":true,"resource_manager_id":true,"storage_account_name":true},"before_sensitive":false,"after_sensitive":{"metadata":{}}}},{"address":"module.backup_storage.random_pet.as_storage_name","module_address":"module.backup_storage","mode":"managed","type":"random_pet","name":"as_storage_name","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":2,"prefix":"gosellbackup","separator":""},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.backup_storage_rg.azurerm_resource_group.this","module_address":"module.backup_storage_rg","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westeurope","managed_by":null,"name":"gosell-backup-storage","tags":{"purpose":"backup_storage"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.build_agent_instance.azurerm_linux_virtual_machine.build_agent_vm[0]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_linux_virtual_machine","name":"build_agent_vm","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"build-ub-0","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"build-ub-osdisk-0","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-build-agents","secret":[],"secure_boot_enabled":null,"size":"Standard_B2s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.build_agent_instance.azurerm_linux_virtual_machine.build_agent_vm[1]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_linux_virtual_machine","name":"build_agent_vm","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"eastus","max_bid_price":-1,"name":"build-ub-1","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"build-ub-osdisk-1","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-build-agents","secret":[],"secure_boot_enabled":null,"size":"Standard_B2s","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[],"computer_name":true,"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.build_agent_instance.azurerm_network_interface.build_agent_nic[0]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_network_interface","name":"build_agent_nic","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"eastus","name":"agent-nic-0","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.build_agent_instance.azurerm_network_interface.build_agent_nic[1]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_network_interface","name":"build_agent_nic","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address_allocation":"Dynamic","private_ip_address_version":"IPv4"}],"location":"eastus","name":"agent-nic-1","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"private_ip_address":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.build_agent_instance.azurerm_network_interface_security_group_association.vm_nic_nsg[0]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.build_agent_instance.azurerm_network_interface_security_group_association.vm_nic_nsg[1]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.build_agent_instance.azurerm_public_ip.build_agent_pip[0]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_public_ip","name":"build_agent_pip","index":0,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Dynamic","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"agent-pip-0","public_ip_prefix_id":null,"resource_group_name":"gosell-build-agents","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.build_agent_instance.azurerm_public_ip.build_agent_pip[1]","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_public_ip","name":"build_agent_pip","index":1,"provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Dynamic","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"eastus","name":"agent-pip-1","public_ip_prefix_id":null,"resource_group_name":"gosell-build-agents","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.build_agent_instance.azurerm_subnet.build_agent_subnet","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_subnet","name":"build_agent_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.1.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"agent-subnet","resource_group_name":"gosell-build-agents","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"agent-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.build_agent_instance.azurerm_virtual_network.build_agent_vnet","module_address":"module.build_agent_instance","mode":"managed","type":"azurerm_virtual_network","name":"build_agent_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.1.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"eastus","name":"agent-vnet","resource_group_name":"gosell-build-agents","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"module.build_agent_rg.azurerm_resource_group.this","module_address":"module.build_agent_rg","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","managed_by":null,"name":"gosell-build-agents","tags":{"purpose":"build_agent_instance"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.create_builder_nsg.azurerm_network_security_group.nsg","module_address":"module.create_builder_nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"eastus","name":"agent-nsg","resource_group_name":"gosell-build-agents","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.create_main_nsg.azurerm_network_security_group.nsg","module_address":"module.create_main_nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westus","name":"main-nsg","resource_group_name":"gosell-main-instance","security_rule":[{"access":"Allow","description":"","destination_address_prefix":"*","destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_range":"22","destination_port_ranges":[],"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_range":"*","source_port_ranges":[]}],"tags":null,"timeouts":null},"after_unknown":{"id":true,"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]},"before_sensitive":false,"after_sensitive":{"security_rule":[{"destination_address_prefixes":[],"destination_application_security_group_ids":[],"destination_port_ranges":[],"source_address_prefixes":[],"source_application_security_group_ids":[],"source_port_ranges":[]}]}}},{"address":"module.main_instance.data.azurerm_public_ip.vm_public_ip_data","module_address":"module.main_instance","mode":"data","type":"azurerm_public_ip","name":"vm_public_ip_data","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["read"],"before":null,"after":{"name":"main-vm-public-ip","resource_group_name":"gosell-main-instance","timeouts":null},"after_unknown":{"allocation_method":true,"ddos_protection_mode":true,"ddos_protection_plan_id":true,"domain_name_label":true,"fqdn":true,"id":true,"idle_timeout_in_minutes":true,"ip_address":true,"ip_tags":true,"ip_version":true,"location":true,"reverse_fqdn":true,"sku":true,"tags":true,"zones":true},"before_sensitive":false,"after_sensitive":{"ip_tags":{},"tags":{},"zones":[]}}},{"address":"module.main_instance.azurerm_linux_virtual_machine.vm","module_address":"module.main_instance","mode":"managed","type":"azurerm_linux_virtual_machine","name":"vm","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"additional_capabilities":[],"admin_password":null,"admin_ssh_key":[{"public_key":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","username":"ubuntu"}],"admin_username":"ubuntu","allow_extension_operations":true,"availability_set_id":null,"boot_diagnostics":[],"bypass_platform_safety_checks_on_user_schedule_enabled":false,"capacity_reservation_group_id":null,"computer_name":"main-vm","custom_data":null,"dedicated_host_group_id":null,"dedicated_host_id":null,"disable_password_authentication":true,"edge_zone":null,"encryption_at_host_enabled":null,"eviction_policy":null,"extensions_time_budget":"PT1H30M","gallery_application":[],"identity":[],"license_type":null,"location":"westus","max_bid_price":-1,"name":"main-vm","os_disk":[{"caching":"ReadWrite","diff_disk_settings":[],"disk_encryption_set_id":null,"name":"main-vm-osdisk","secure_vm_disk_encryption_set_id":null,"security_encryption_type":null,"storage_account_type":"Standard_LRS","write_accelerator_enabled":false}],"os_image_notification":[],"patch_assessment_mode":"ImageDefault","patch_mode":"ImageDefault","plan":[],"platform_fault_domain":-1,"priority":"Regular","provision_vm_agent":true,"proximity_placement_group_id":null,"reboot_setting":null,"resource_group_name":"gosell-main-instance","secret":[],"secure_boot_enabled":null,"size":"Standard_B2ms","source_image_id":null,"source_image_reference":[{"offer":"0001-com-ubuntu-server-jammy","publisher":"Canonical","sku":"22_04-lts","version":"latest"}],"tags":null,"timeouts":null,"user_data":null,"virtual_machine_scale_set_id":null,"vm_agent_platform_updates_enabled":false,"vtpm_enabled":null,"zone":null},"after_unknown":{"additional_capabilities":[],"admin_ssh_key":[{}],"boot_diagnostics":[],"disk_controller_type":true,"gallery_application":[],"id":true,"identity":[],"network_interface_ids":true,"os_disk":[{"diff_disk_settings":[],"disk_size_gb":true}],"os_image_notification":[],"plan":[],"private_ip_address":true,"private_ip_addresses":true,"public_ip_address":true,"public_ip_addresses":true,"secret":[],"source_image_reference":[{}],"termination_notification":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"additional_capabilities":[],"admin_password":true,"admin_ssh_key":true,"boot_diagnostics":[],"custom_data":true,"gallery_application":[],"identity":[],"network_interface_ids":[],"os_disk":[{"diff_disk_settings":[]}],"os_image_notification":[],"plan":[],"private_ip_addresses":[],"public_ip_addresses":[],"secret":[],"source_image_reference":[{}],"termination_notification":[]}}},{"address":"module.main_instance.azurerm_network_interface.vm_nic","module_address":"module.main_instance","mode":"managed","type":"azurerm_network_interface","name":"vm_nic","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"auxiliary_mode":null,"auxiliary_sku":null,"edge_zone":null,"internal_dns_name_label":null,"ip_configuration":[{"name":"internal","private_ip_address":"10.0.1.5","private_ip_address_allocation":"Static","private_ip_address_version":"IPv4"}],"location":"westus","name":"main-vm-nic","resource_group_name":"gosell-main-instance","tags":null,"timeouts":null},"after_unknown":{"accelerated_networking_enabled":true,"applied_dns_servers":true,"dns_servers":true,"enable_accelerated_networking":true,"enable_ip_forwarding":true,"id":true,"internal_domain_name_suffix":true,"ip_configuration":[{"gateway_load_balancer_frontend_ip_configuration_id":true,"primary":true,"public_ip_address_id":true,"subnet_id":true}],"ip_forwarding_enabled":true,"mac_address":true,"private_ip_address":true,"private_ip_addresses":true,"virtual_machine_id":true},"before_sensitive":false,"after_sensitive":{"applied_dns_servers":[],"dns_servers":[],"ip_configuration":[{}],"private_ip_addresses":[]}}},{"address":"module.main_instance.azurerm_network_interface_security_group_association.vm_nic_nsg","module_address":"module.main_instance","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"id":true,"network_interface_id":true,"network_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.main_instance.azurerm_public_ip.vm_public_ip","module_address":"module.main_instance","mode":"managed","type":"azurerm_public_ip","name":"vm_public_ip","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"allocation_method":"Static","ddos_protection_mode":"VirtualNetworkInherited","ddos_protection_plan_id":null,"domain_name_label":null,"edge_zone":null,"idle_timeout_in_minutes":4,"ip_tags":null,"ip_version":"IPv4","location":"westus","name":"main-vm-public-ip","public_ip_prefix_id":null,"resource_group_name":"gosell-main-instance","reverse_fqdn":null,"sku":"Basic","sku_tier":"Regional","tags":null,"timeouts":null,"zones":null},"after_unknown":{"fqdn":true,"id":true,"ip_address":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.main_instance.azurerm_subnet.vm_subnet","module_address":"module.main_instance","mode":"managed","type":"azurerm_subnet","name":"vm_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.0.1.0/24"],"default_outbound_access_enabled":true,"delegation":[],"name":"main-vm-subnet","resource_group_name":"gosell-main-instance","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"main-vm-vnet"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}},{"address":"module.main_instance.azurerm_virtual_network.vm_vnet","module_address":"module.main_instance","mode":"managed","type":"azurerm_virtual_network","name":"vm_vnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_space":["10.0.0.0/16"],"bgp_community":null,"ddos_protection_plan":[],"edge_zone":null,"encryption":[],"flow_timeout_in_minutes":null,"location":"westus","name":"main-vm-vnet","resource_group_name":"gosell-main-instance","tags":null,"timeouts":null},"after_unknown":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":true,"encryption":[],"guid":true,"id":true,"subnet":true},"before_sensitive":false,"after_sensitive":{"address_space":[false],"ddos_protection_plan":[],"dns_servers":[],"encryption":[],"subnet":[]}}},{"address":"module.main_instance.time_sleep.wait_30_seconds","module_address":"module.main_instance","mode":"managed","type":"time_sleep","name":"wait_30_seconds","provider_name":"registry.terraform.io/hashicorp/time","change":{"actions":["create"],"before":null,"after":{"create_duration":"30s","destroy_duration":null,"triggers":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.main_instance.time_sleep.wait_for_ip","module_address":"module.main_instance","mode":"managed","type":"time_sleep","name":"wait_for_ip","provider_name":"registry.terraform.io/hashicorp/time","change":{"actions":["create"],"before":null,"after":{"create_duration":"60s","destroy_duration":null,"triggers":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.main_instance_rg.azurerm_resource_group.this","module_address":"module.main_instance_rg","mode":"managed","type":"azurerm_resource_group","name":"this","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"location":"westus","managed_by":null,"name":"gosell-main-instance","tags":{"purpose":"main_instance"},"timeouts":null},"after_unknown":{"id":true,"tags":{}},"before_sensitive":false,"after_sensitive":{"tags":{}}}},{"address":"module.main_rule_block_ssh.azurerm_network_security_rule.rule","module_address":"module.main_rule_block_ssh","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"access":"Deny","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"DenySSHFromAll","network_security_group_name":"main-nsg","priority":150,"protocol":"Tcp","resource_group_name":"gosell-main-instance","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null,"timeouts":null},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"ansible_inventory_path":{"actions":["create"],"before":null,"after":"../An/hosts","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"jenkins_agent_ips":{"actions":["create"],"before":null,"after":[null,null],"after_unknown":[true,true],"before_sensitive":false,"after_sensitive":false},"jenkins_master_ip":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.9.8","values":{"outputs":{"ansible_inventory_path":{"sensitive":false,"value":"../An/hosts"}},"root_module":{"resources":[{"address":"data.doppler_secrets.az-creds","mode":"data","type":"doppler_secrets","name":"az-creds","provider_name":"registry.terraform.io/dopplerhq/doppler","schema_version":0,"values":{"config":null,"id":"<SECRET CHANGE DOPPLER>","map":{"CLIENT_ID":"<SECRET CHANGE DOPPLER>","CLIENT_SECRET":"<SECRET CHANGE DOPPLER>","DISPLAYNAME":"az-login","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"az","SSHPRV":"-----BEGIN RSA PRIVATE KEY-----\n<SECRET CHANGE DOPPLER>\n-----END RSA PRIVATE KEY-----","SSHPUB":"ssh-rsa <SECRET CHANGE DOPPLER> generated-by-azure","TENANT_ID":"<SECRET CHANGE DOPPLER>"},"project":null},"sensitive_values":{"map":true}}]}}},"configuration":{"provider_config":{"azapi":{"name":"azapi","version_constraint":"~\u003e 1.5"},"azurerm":{"name":"azurerm","expressions":{"client_id":{"references":["data.doppler_secrets.az-creds.map.CLIENT_ID","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]},"client_secret":{"references":["data.doppler_secrets.az-creds.map.CLIENT_SECRET","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]},"features":[{}],"subscription_id":{"references":["var.azure_subscription_id"]},"tenant_id":{"references":["data.doppler_secrets.az-creds.map.TENANT_ID","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]}},"version_constraint":"~\u003e 3.0"},"doppler":{"name":"doppler","expressions":{"doppler_token":{"references":["var.doppler_token"]}}},"local":{"name":"local","version_constraint":"~\u003e 2.0"},"random":{"name":"random","version_constraint":"~\u003e 3.0"},"time":{"name":"time"}},"root_module":{"outputs":{"ansible_inventory_path":{"expression":{"references":["module.ansible_inventory.inventory_path","module.ansible_inventory"]},"description":"Path to the generated Ansible inventory file"},"jenkins_agent_ips":{"expression":{"references":["module.build_agent_instance.public_ips","module.build_agent_instance"]},"description":"Private IP addresses of Jenkins agents"},"jenkins_master_ip":{"expression":{"references":["module.main_instance.public_ip","module.main_instance"]},"description":"Private IP address of the Jenkins master"}},"resources":[{"address":"data.doppler_secrets.az-creds","mode":"data","type":"doppler_secrets","name":"az-creds","provider_config_key":"doppler","schema_version":0}],"module_calls":{"agent_rule_block_ssh":{"source":"./modules/nsg_rule","expressions":{"nsg_name":{"references":["module.create_builder_nsg.nsg_name","module.create_builder_nsg"]},"priority":{"constant_value":150},"resource_group_name":{"references":["module.build_agent_rg.resource_group_name","module.build_agent_rg"]}},"module":{"outputs":{"rule_id":{"expression":{"references":["azurerm_network_security_rule.rule.id","azurerm_network_security_rule.rule"]},"description":"ID of the created NSG rule"}},"resources":[{"address":"azurerm_network_security_rule.rule","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Deny"},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"22"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"DenySSHFromAll"},"network_security_group_name":{"references":["var.nsg_name"]},"priority":{"references":["var.priority"]},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0}],"variables":{"nsg_name":{},"priority":{"description":"Priority of the NSG rule"},"resource_group_name":{}}}},"aks_cluster":{"source":"./modules/aks","expressions":{"aks_admin_username":{"references":["var.aks_admin_username"]},"aks_node_count":{"references":["var.node_count"]},"aks_vm_size":{"references":["var.aks_vm_size"]},"resource_group_location":{"references":["module.aks_cluster_rg.resource_group_location","module.aks_cluster_rg"]},"resource_group_name":{"references":["module.aks_cluster_rg.resource_group_name","module.aks_cluster_rg"]},"ssh_public_key_data":{"references":["data.doppler_secrets.az-creds.map.SSHPUB","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]}},"module":{"outputs":{"client_certificate":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].client_certificate","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"client_key":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].client_key","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"cluster_ca_certificate":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].cluster_ca_certificate","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"cluster_password":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].password","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"cluster_username":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].username","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"host":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config[0].host","azurerm_kubernetes_cluster.k8s.kube_config[0]","azurerm_kubernetes_cluster.k8s.kube_config","azurerm_kubernetes_cluster.k8s"]}},"kube_config":{"sensitive":true,"expression":{"references":["azurerm_kubernetes_cluster.k8s.kube_config_raw","azurerm_kubernetes_cluster.k8s"]}},"kubernetes_cluster_name":{"expression":{"references":["azurerm_kubernetes_cluster.k8s.name","azurerm_kubernetes_cluster.k8s"]},"description":"Name of the created AKS cluster."}},"resources":[{"address":"azurerm_kubernetes_cluster.k8s","mode":"managed","type":"azurerm_kubernetes_cluster","name":"k8s","provider_config_key":"azurerm","expressions":{"default_node_pool":[{"name":{"constant_value":"agentpool"},"node_count":{"references":["var.aks_node_count"]},"vm_size":{"references":["var.aks_vm_size"]}}],"dns_prefix":{"references":["random_pet.azurerm_kubernetes_cluster_dns_prefix.id","random_pet.azurerm_kubernetes_cluster_dns_prefix"]},"identity":[{"type":{"constant_value":"SystemAssigned"}}],"linux_profile":[{"admin_username":{"references":["var.aks_admin_username"]},"ssh_key":[{"key_data":{"references":["var.ssh_public_key_data"]}}]}],"location":{"references":["var.resource_group_location"]},"name":{"references":["random_pet.azurerm_kubernetes_cluster_name.id","random_pet.azurerm_kubernetes_cluster_name"]},"network_profile":[{"load_balancer_sku":{"constant_value":"standard"},"network_plugin":{"constant_value":"kubenet"}}],"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":2},{"address":"random_pet.azurerm_kubernetes_cluster_dns_prefix","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_dns_prefix","provider_config_key":"random","expressions":{"prefix":{"constant_value":"dns"}},"schema_version":0},{"address":"random_pet.azurerm_kubernetes_cluster_name","mode":"managed","type":"random_pet","name":"azurerm_kubernetes_cluster_name","provider_config_key":"random","expressions":{"prefix":{"constant_value":"cluster"}},"schema_version":0}],"variables":{"aks_admin_username":{"description":"Admin username for the AKS cluster"},"aks_node_count":{"description":"Number of nodes in the default AKS node pool"},"aks_vm_size":{"description":"Size of the VMs in the AKS node pool"},"resource_group_location":{"description":"Location where the AKS cluster will be created"},"resource_group_name":{"description":"Name of the resource group where AKS will be created"},"ssh_public_key_data":{"description":"Public SSH key data used by the AKS cluster"}}}},"aks_cluster_rg":{"source":"./modules/resource_group","expressions":{"location":{"constant_value":"northeurope"},"resource_group_name":{"references":["var.rg_prefix"]},"tags":{"constant_value":{"purpose":"aks_cluster"}}},"module":{"outputs":{"resource_group_id":{"expression":{"references":["azurerm_resource_group.this.id","azurerm_resource_group.this"]}},"resource_group_location":{"expression":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]}},"resource_group_name":{"expression":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}}},"resources":[{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.resource_group_name"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"location":{"description":"Azure region where the resource group will be created"},"resource_group_name":{"description":"Name of the resource group"},"tags":{"default":{},"description":"Tags to be applied to the resource group"}}}},"ansible_inventory":{"source":"./modules/ansible_inventory","expressions":{"admin_username":{"references":["var.vm_admin_username"]},"build_agent_ips":{"references":["module.build_agent_instance.public_ips","module.build_agent_instance"]},"inventory_path":{"constant_value":"../An/hosts"},"main_instance_ip":{"references":["module.main_instance.public_ip","module.main_instance"]}},"module":{"outputs":{"inventory_path":{"expression":{"references":["local_file.ansible_inventory.filename","local_file.ansible_inventory"]},"description":"Path to the generated Ansible inventory file"}},"resources":[{"address":"local_file.ansible_inventory","mode":"managed","type":"local_file","name":"ansible_inventory","provider_config_key":"local","expressions":{"content":{"references":["local.template_path","local.timestamp","local.user","var.main_instance_ip","var.build_agent_ips","var.admin_username"]},"filename":{"references":["var.inventory_path"]}},"schema_version":0}],"variables":{"admin_username":{"description":"The administrative username for the VMs"},"build_agent_ips":{"description":"A list of private IPs for the build agents"},"inventory_path":{"default":"../../ansible","description":"Path where the Ansible inventory file will be saved"},"main_instance_ip":{"description":"The private IP of the main instance"}}}},"backup_storage":{"source":"./modules/backup_storage","expressions":{"backup_storage_prefix":{"references":["var.backup_storage_prefix"]},"container_name":{"constant_value":"backups"},"location":{"references":["module.backup_storage_rg.resource_group_location","module.backup_storage_rg"]},"resource_group_name":{"references":["module.backup_storage_rg.resource_group_name","module.backup_storage_rg"]}},"module":{"outputs":{"backup_container_name":{"expression":{"references":["azurerm_storage_container.backup_container.name","azurerm_storage_container.backup_container"]},"description":"Name of the container for backups."},"storage_account_id":{"expression":{"references":["azurerm_storage_account.backup_sa.id","azurerm_storage_account.backup_sa"]},"description":"ID of the created Storage Account."},"storage_account_name":{"expression":{"references":["azurerm_storage_account.backup_sa.name","azurerm_storage_account.backup_sa"]},"description":"Name of the created Storage Account."}},"resources":[{"address":"azurerm_storage_account.backup_sa","mode":"managed","type":"azurerm_storage_account","name":"backup_sa","provider_config_key":"azurerm","expressions":{"account_kind":{"constant_value":"StorageV2"},"account_replication_type":{"constant_value":"LRS"},"account_tier":{"constant_value":"Standard"},"location":{"references":["var.location"]},"min_tls_version":{"constant_value":"TLS1_2"},"name":{"references":["local.sanitized_storage_name"]},"public_network_access_enabled":{"constant_value":true},"resource_group_name":{"references":["var.resource_group_name"]},"tags":{"constant_value":{"environment":"production","purpose":"backups"}}},"schema_version":4},{"address":"azurerm_storage_container.backup_container","mode":"managed","type":"azurerm_storage_container","name":"backup_container","provider_config_key":"azurerm","expressions":{"container_access_type":{"constant_value":"private"},"name":{"references":["var.container_name"]},"storage_account_name":{"references":["azurerm_storage_account.backup_sa.name","azurerm_storage_account.backup_sa"]}},"schema_version":1},{"address":"random_pet.as_storage_name","mode":"managed","type":"random_pet","name":"as_storage_name","provider_config_key":"random","expressions":{"prefix":{"references":["var.backup_storage_prefix"]},"separator":{"constant_value":""}},"schema_version":0}],"variables":{"backup_storage_prefix":{},"container_name":{"default":"backups","description":"The name of the container in the Storage Account where backups will be stored."},"location":{},"resource_group_name":{}}}},"backup_storage_rg":{"source":"./modules/resource_group","expressions":{"location":{"constant_value":"westeurope"},"resource_group_name":{"references":["var.rg_prefix"]},"tags":{"constant_value":{"purpose":"backup_storage"}}},"module":{"outputs":{"resource_group_id":{"expression":{"references":["azurerm_resource_group.this.id","azurerm_resource_group.this"]}},"resource_group_location":{"expression":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]}},"resource_group_name":{"expression":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}}},"resources":[{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.resource_group_name"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"location":{"description":"Azure region where the resource group will be created"},"resource_group_name":{"description":"Name of the resource group"},"tags":{"default":{},"description":"Tags to be applied to the resource group"}}}},"build_agent_instance":{"source":"./modules/compute/build_agent_instance","expressions":{"admin_username":{"references":["var.vm_admin_username"]},"instance_count":{"references":["var.instance_count"]},"location":{"references":["module.build_agent_rg.resource_group_location","module.build_agent_rg"]},"nsg_id":{"references":["module.create_builder_nsg.nsg_id","module.create_builder_nsg"]},"resource_group_name":{"references":["module.build_agent_rg.resource_group_name","module.build_agent_rg"]},"ssh_public_key":{"references":["data.doppler_secrets.az-creds.map.SSHPUB","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]},"vm_name":{"constant_value":"build-ub"},"vm_size":{"references":["var.build_agent_vm_size"]},"vm_sku":{"references":["var.vm_sku"]}},"module":{"outputs":{"private_ips":{"expression":{"references":["azurerm_network_interface.build_agent_nic"]},"description":"List of private IP addresses for build agents"},"public_ips":{"expression":{"references":["azurerm_public_ip.build_agent_pip"]},"description":"List of public IP addresses for build agents"},"vm_names":{"expression":{"references":["azurerm_linux_virtual_machine.build_agent_vm"]},"description":"List of build agent VM names"}},"resources":[{"address":"azurerm_linux_virtual_machine.build_agent_vm","mode":"managed","type":"azurerm_linux_virtual_machine","name":"build_agent_vm","provider_config_key":"azurerm","expressions":{"admin_ssh_key":[{"public_key":{"references":["var.ssh_public_key"]},"username":{"references":["var.admin_username"]}}],"admin_username":{"references":["var.admin_username"]},"location":{"references":["var.location"]},"name":{"references":["var.vm_name","count.index"]},"network_interface_ids":{"references":["azurerm_network_interface.build_agent_nic","count.index"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"name":{"references":["var.vm_name","count.index"]},"storage_account_type":{"constant_value":"Standard_LRS"}}],"resource_group_name":{"references":["var.resource_group_name"]},"size":{"references":["var.vm_size"]},"source_image_reference":[{"offer":{"constant_value":"0001-com-ubuntu-server-jammy"},"publisher":{"constant_value":"Canonical"},"sku":{"references":["var.vm_sku"]},"version":{"constant_value":"latest"}}]},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"azurerm_network_interface.build_agent_nic","mode":"managed","type":"azurerm_network_interface","name":"build_agent_nic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"internal"},"private_ip_address_allocation":{"constant_value":"Dynamic"},"public_ip_address_id":{"references":["azurerm_public_ip.build_agent_pip","count.index"]},"subnet_id":{"references":["azurerm_subnet.build_agent_subnet.id","azurerm_subnet.build_agent_subnet"]}}],"location":{"references":["var.location"]},"name":{"references":["count.index"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"azurerm_network_interface_security_group_association.vm_nic_nsg","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","provider_config_key":"azurerm","expressions":{"network_interface_id":{"references":["azurerm_network_interface.build_agent_nic","count.index"]},"network_security_group_id":{"references":["var.nsg_id"]}},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"azurerm_public_ip.build_agent_pip","mode":"managed","type":"azurerm_public_ip","name":"build_agent_pip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Dynamic"},"location":{"references":["var.location"]},"name":{"references":["count.index"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Basic"}},"schema_version":0,"count_expression":{"references":["var.instance_count"]}},{"address":"azurerm_subnet.build_agent_subnet","mode":"managed","type":"azurerm_subnet","name":"build_agent_subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"constant_value":["10.1.1.0/24"]},"name":{"constant_value":"agent-subnet"},"resource_group_name":{"references":["var.resource_group_name"]},"virtual_network_name":{"references":["azurerm_virtual_network.build_agent_vnet.name","azurerm_virtual_network.build_agent_vnet"]}},"schema_version":0},{"address":"azurerm_virtual_network.build_agent_vnet","mode":"managed","type":"azurerm_virtual_network","name":"build_agent_vnet","provider_config_key":"azurerm","expressions":{"address_space":{"constant_value":["10.1.0.0/16"]},"location":{"references":["var.location"]},"name":{"constant_value":"agent-vnet"},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0}],"variables":{"admin_username":{"description":"Admin username for the VM"},"instance_count":{"default":1,"description":"Number of build agent instances to create"},"location":{"description":"The Azure region where build agent resources will be created"},"nsg_id":{"description":"Network Security Group ID"},"resource_group_name":{"description":"Name of the resource group"},"ssh_public_key":{"description":"SSH public key for VM access"},"vm_name":{"description":"Base name for the VM instances"},"vm_size":{"description":"The size of the VM"},"vm_sku":{"description":"The SKU of the VM image"}}}},"build_agent_rg":{"source":"./modules/resource_group","expressions":{"location":{"constant_value":"eastus"},"resource_group_name":{"references":["var.rg_prefix"]},"tags":{"constant_value":{"purpose":"build_agent_instance"}}},"module":{"outputs":{"resource_group_id":{"expression":{"references":["azurerm_resource_group.this.id","azurerm_resource_group.this"]}},"resource_group_location":{"expression":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]}},"resource_group_name":{"expression":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}}},"resources":[{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.resource_group_name"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"location":{"description":"Azure region where the resource group will be created"},"resource_group_name":{"description":"Name of the resource group"},"tags":{"default":{},"description":"Tags to be applied to the resource group"}}}},"create_builder_nsg":{"source":"./modules/nsg","expressions":{"location":{"references":["module.build_agent_rg.resource_group_location","module.build_agent_rg"]},"nsg_name":{"constant_value":"agent-nsg"},"resource_group_name":{"references":["module.build_agent_rg.resource_group_name","module.build_agent_rg"]},"vnet_address_space":{"constant_value":"10.1.0.0/16"}},"module":{"outputs":{"nsg_id":{"expression":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]},"description":"ID of the created NSG"},"nsg_name":{"expression":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"description":"Name of the created NSG"}},"resources":[{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.nsg_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"security_rule":{"constant_value":[{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null}]}},"schema_version":0}],"variables":{"location":{},"nsg_name":{},"resource_group_name":{},"vnet_address_space":{}}}},"create_main_nsg":{"source":"./modules/nsg","expressions":{"location":{"references":["module.main_instance_rg.resource_group_location","module.main_instance_rg"]},"nsg_name":{"constant_value":"main-nsg"},"resource_group_name":{"references":["module.main_instance_rg.resource_group_name","module.main_instance_rg"]},"vnet_address_space":{"constant_value":"10.0.0.0/16"}},"module":{"outputs":{"nsg_id":{"expression":{"references":["azurerm_network_security_group.nsg.id","azurerm_network_security_group.nsg"]},"description":"ID of the created NSG"},"nsg_name":{"expression":{"references":["azurerm_network_security_group.nsg.name","azurerm_network_security_group.nsg"]},"description":"Name of the created NSG"}},"resources":[{"address":"azurerm_network_security_group.nsg","mode":"managed","type":"azurerm_network_security_group","name":"nsg","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.nsg_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"security_rule":{"constant_value":[{"access":"Allow","description":null,"destination_address_prefix":"*","destination_address_prefixes":null,"destination_application_security_group_ids":null,"destination_port_range":"22","destination_port_ranges":null,"direction":"Inbound","name":"AllowSSHFromAll","priority":200,"protocol":"Tcp","source_address_prefix":"*","source_address_prefixes":null,"source_application_security_group_ids":null,"source_port_range":"*","source_port_ranges":null}]}},"schema_version":0}],"variables":{"location":{},"nsg_name":{},"resource_group_name":{},"vnet_address_space":{}}}},"main_instance":{"source":"./modules/compute/main_instance","expressions":{"admin_username":{"references":["var.vm_admin_username"]},"location":{"references":["module.main_instance_rg.resource_group_location","module.main_instance_rg"]},"nsg_id":{"references":["module.create_main_nsg.nsg_id","module.create_main_nsg"]},"resource_group_name":{"references":["module.main_instance_rg.resource_group_name","module.main_instance_rg"]},"ssh_public_key":{"references":["data.doppler_secrets.az-creds.map.SSHPUB","data.doppler_secrets.az-creds.map","data.doppler_secrets.az-creds"]},"vm_name":{"references":["var.main_vm_name"]},"vm_private_ip":{"references":["var.vm_private_ip"]},"vm_size":{"references":["var.main_instance_vm_size"]},"vm_sku":{"references":["var.vm_sku"]}},"module":{"outputs":{"private_ip":{"expression":{"references":["azurerm_network_interface.vm_nic.private_ip_address","azurerm_network_interface.vm_nic"]},"description":"Private IP address of the main instance"},"public_ip":{"expression":{"references":["data.azurerm_public_ip.vm_public_ip_data.ip_address","data.azurerm_public_ip.vm_public_ip_data"]},"description":"Public IP address of the main instance","depends_on":["azurerm_linux_virtual_machine.vm"]},"subnet_id":{"expression":{"references":["azurerm_subnet.vm_subnet.id","azurerm_subnet.vm_subnet"]},"description":"ID of the subnet created for the main instance"},"vm_name":{"expression":{"references":["azurerm_linux_virtual_machine.vm.name","azurerm_linux_virtual_machine.vm"]},"description":"Name of the main virtual machine"}},"resources":[{"address":"azurerm_linux_virtual_machine.vm","mode":"managed","type":"azurerm_linux_virtual_machine","name":"vm","provider_config_key":"azurerm","expressions":{"admin_ssh_key":[{"public_key":{"references":["var.ssh_public_key"]},"username":{"references":["var.admin_username"]}}],"admin_username":{"references":["var.admin_username"]},"computer_name":{"references":["var.vm_name"]},"disable_password_authentication":{"constant_value":true},"location":{"references":["var.location"]},"name":{"references":["var.vm_name"]},"network_interface_ids":{"references":["azurerm_network_interface.vm_nic.id","azurerm_network_interface.vm_nic"]},"os_disk":[{"caching":{"constant_value":"ReadWrite"},"name":{"references":["var.vm_name"]},"storage_account_type":{"constant_value":"Standard_LRS"}}],"resource_group_name":{"references":["var.resource_group_name"]},"size":{"references":["var.vm_size"]},"source_image_reference":[{"offer":{"constant_value":"0001-com-ubuntu-server-jammy"},"publisher":{"constant_value":"Canonical"},"sku":{"references":["var.vm_sku"]},"version":{"constant_value":"latest"}}]},"schema_version":0,"depends_on":["azurerm_public_ip.vm_public_ip","azurerm_network_interface.vm_nic"]},{"address":"azurerm_network_interface.vm_nic","mode":"managed","type":"azurerm_network_interface","name":"vm_nic","provider_config_key":"azurerm","expressions":{"ip_configuration":[{"name":{"constant_value":"internal"},"private_ip_address":{"references":["var.vm_private_ip"]},"private_ip_address_allocation":{"constant_value":"Static"},"public_ip_address_id":{"references":["azurerm_public_ip.vm_public_ip.id","azurerm_public_ip.vm_public_ip"]},"subnet_id":{"references":["azurerm_subnet.vm_subnet.id","azurerm_subnet.vm_subnet"]}}],"location":{"references":["var.location"]},"name":{"references":["var.vm_name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"azurerm_network_interface_security_group_association.vm_nic_nsg","mode":"managed","type":"azurerm_network_interface_security_group_association","name":"vm_nic_nsg","provider_config_key":"azurerm","expressions":{"network_interface_id":{"references":["azurerm_network_interface.vm_nic.id","azurerm_network_interface.vm_nic"]},"network_security_group_id":{"references":["var.nsg_id"]}},"schema_version":0},{"address":"azurerm_public_ip.vm_public_ip","mode":"managed","type":"azurerm_public_ip","name":"vm_public_ip","provider_config_key":"azurerm","expressions":{"allocation_method":{"constant_value":"Static"},"location":{"references":["var.location"]},"name":{"references":["var.vm_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"sku":{"constant_value":"Basic"}},"schema_version":0},{"address":"azurerm_subnet.vm_subnet","mode":"managed","type":"azurerm_subnet","name":"vm_subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"constant_value":["10.0.1.0/24"]},"name":{"references":["var.vm_name"]},"resource_group_name":{"references":["var.resource_group_name"]},"virtual_network_name":{"references":["azurerm_virtual_network.vm_vnet.name","azurerm_virtual_network.vm_vnet"]}},"schema_version":0,"depends_on":["azurerm_virtual_network.vm_vnet","time_sleep.wait_30_seconds"]},{"address":"azurerm_virtual_network.vm_vnet","mode":"managed","type":"azurerm_virtual_network","name":"vm_vnet","provider_config_key":"azurerm","expressions":{"address_space":{"constant_value":["10.0.0.0/16"]},"location":{"references":["var.location"]},"name":{"references":["var.vm_name"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0},{"address":"time_sleep.wait_30_seconds","mode":"managed","type":"time_sleep","name":"wait_30_seconds","provider_config_key":"time","expressions":{"create_duration":{"constant_value":"30s"}},"schema_version":0,"depends_on":["azurerm_virtual_network.vm_vnet"]},{"address":"time_sleep.wait_for_ip","mode":"managed","type":"time_sleep","name":"wait_for_ip","provider_config_key":"time","expressions":{"create_duration":{"constant_value":"60s"}},"schema_version":0,"depends_on":["azurerm_linux_virtual_machine.vm"]},{"address":"data.azurerm_public_ip.vm_public_ip_data","mode":"data","type":"azurerm_public_ip","name":"vm_public_ip_data","provider_config_key":"azurerm","expressions":{"name":{"references":["azurerm_public_ip.vm_public_ip.name","azurerm_public_ip.vm_public_ip"]},"resource_group_name":{"references":["var.resource_group_name"]}},"schema_version":0,"depends_on":["azurerm_linux_virtual_machine.vm","time_sleep.wait_for_ip"]}],"variables":{"admin_username":{},"location":{},"nsg_id":{},"resource_group_name":{},"ssh_public_key":{},"vm_name":{},"vm_private_ip":{},"vm_size":{},"vm_sku":{}}}},"main_instance_rg":{"source":"./modules/resource_group","expressions":{"location":{"constant_value":"westus"},"resource_group_name":{"references":["var.rg_prefix"]},"tags":{"constant_value":{"purpose":"main_instance"}}},"module":{"outputs":{"resource_group_id":{"expression":{"references":["azurerm_resource_group.this.id","azurerm_resource_group.this"]}},"resource_group_location":{"expression":{"references":["azurerm_resource_group.this.location","azurerm_resource_group.this"]}},"resource_group_name":{"expression":{"references":["azurerm_resource_group.this.name","azurerm_resource_group.this"]}}},"resources":[{"address":"azurerm_resource_group.this","mode":"managed","type":"azurerm_resource_group","name":"this","provider_config_key":"azurerm","expressions":{"location":{"references":["var.location"]},"name":{"references":["var.resource_group_name"]},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"location":{"description":"Azure region where the resource group will be created"},"resource_group_name":{"description":"Name of the resource group"},"tags":{"default":{},"description":"Tags to be applied to the resource group"}}}},"main_rule_block_ssh":{"source":"./modules/nsg_rule","expressions":{"nsg_name":{"references":["module.create_main_nsg.nsg_name","module.create_main_nsg"]},"priority":{"constant_value":150},"resource_group_name":{"references":["module.main_instance_rg.resource_group_name","module.main_instance_rg"]}},"module":{"outputs":{"rule_id":{"expression":{"references":["azurerm_network_security_rule.rule.id","azurerm_network_security_rule.rule"]},"description":"ID of the created NSG rule"}},"resources":[{"address":"azurerm_network_security_rule.rule","mode":"managed","type":"azurerm_network_security_rule","name":"rule","provider_config_key":"azurerm","expressions":{"access":{"constant_value":"Deny"},"destination_address_prefix":{"constant_value":"*"},"destination_port_range":{"constant_value":"22"},"direction":{"constant_value":"Inbound"},"name":{"constant_value":"DenySSHFromAll"},"network_security_group_name":{"references":["var.nsg_name"]},"priority":{"references":["var.priority"]},"protocol":{"constant_value":"Tcp"},"resource_group_name":{"references":["var.resource_group_name"]},"source_address_prefix":{"constant_value":"*"},"source_port_range":{"constant_value":"*"}},"schema_version":0}],"variables":{"nsg_name":{},"priority":{"description":"Priority of the NSG rule"},"resource_group_name":{}}}}},"variables":{"aks_admin_username":{"default":"ubuntu","description":"The admin username for the AKS cluster."},"aks_vm_size":{"default":"Standard_B2s","description":"The size of the Virtual Machine used in the AKS node pool."},"azure_subscription_id":{"default":"3eba8433-8aaf-40ef-9be5-87b8edefec97","description":"The ID of your Azure subscription."},"backup_storage_prefix":{"default":"gosellbackup","description":"The prefix for the Azure backup storage name."},"build_agent_vm_size":{"default":"Standard_B2s","description":"The size (SKU) of the Build-Agent virtual machine."},"doppler_token":{"description":"Doppler token","sensitive":true},"instance_count":{"default":2,"description":"The number of Build-Agent instances."},"main_instance_vm_size":{"default":"Standard_B2ms","description":"The size (SKU) of the main virtual machine."},"main_vm_name":{"default":"main-vm","description":"The name of the main VM."},"node_count":{"default":2,"description":"The initial number of nodes for the node pool."},"rg_prefix":{"default":"gosell","description":"Region group prefix."},"vm_admin_username":{"default":"ubuntu","description":"The administrative login for the VM."},"vm_private_ip":{"default":"10.0.1.5","description":"The private IP address for the main VM."},"vm_sku":{"default":"22_04-lts","description":"The SKU of the VM image."}}}}}